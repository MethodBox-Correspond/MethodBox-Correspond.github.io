<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>å±±ä¸œå†œä¸šå¤§å­¦</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- å¼•å…¥ Google Fonts ç°ä»£æ— è¡¬çº¿å­—ä½“ -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2fae58;
      --primary-light: #eafbee;
      --primary-dark: #206e3a;
      --accent: #baf9bc;
      --white: #fff;
      --gray: #f4f6f9;
      --radius: 20px;
      --shadow: 0 8px 32px rgba(47, 174, 88, 0.12);
    }
    * {margin: 0; padding: 0; box-sizing: border-box;}
    body {
      font-family: 'Inter', 'Segoe UI', 'Microsoft Yahei', Arial, sans-serif;
      background: var(--gray);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      overflow-x: hidden;
    }
    header {
      width: 100vw;
      position: relative;
      margin-bottom: 0;
      z-index: 2;
      background: var(--primary-light);
      box-shadow: 0 4px 24px rgba(47, 174, 88, 0.10);
    }
    .banner-img {
      display: block;
      width: 100vw;
      max-height: 320px;
      object-fit: cover;
      border-bottom-left-radius: var(--radius);
      border-bottom-right-radius: var(--radius);
      box-shadow: 0 6px 20px rgba(47,174,88,.08);
    }
    .banner-title {
      position: absolute;
      left: 50%;
      top: 38px;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.82);
      padding: 18px 38px;
      border-radius: 36px;
      font-size: 2.6rem;
      color: var(--primary-dark);
      font-weight: 700;
      letter-spacing: 2px;
      box-shadow: 0 2px 16px rgba(47,174,88,.07);
      text-shadow: 0 2px 12px rgba(47,174,88,.08);
      z-index: 2;
      white-space: nowrap;
    }
    @media (max-width: 600px) {
      .banner-title {padding: 8px 12vw; font-size: 1.25rem; top: 12px;}
      .banner-img {max-height: 160px;}
    }
    .container {
      width: 100%;
      max-width: 520px;
      margin: 0 auto;
      margin-top: -38px;
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 42px 34px 30px 34px;
      text-align: center;
      position: relative;
      z-index: 3;
      min-height: 300px;
    }
    @media (max-width: 600px) {
      .container {max-width: 98vw; padding: 18px 3vw 14px 3vw; margin-top: -18px;}
    }
    .nav-links {
      display: flex;
      flex-direction: column;
      gap: 24px;
      margin: 45px 0 18px 0;
    }
    .nav-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 22px 18px 18px;
      background: linear-gradient(90deg, #2fae58 0%, #86e993 100%);
      color: var(--white);
      font-size: 1.15rem;
      font-weight: 600;
      border-radius: 44px;
      text-decoration: none;
      box-shadow: 0 2px 10px rgba(47,174,88,.10);
      transition: background .18s, transform .18s, box-shadow .18s;
      border: none;
      position: relative;
      overflow: hidden;
      min-height: 52px;
    }
    .nav-link:hover {
      background: linear-gradient(90deg, #206e3a 0%, #6fd870 100%);
      transform: scale(1.03) translateY(-2px);
      box-shadow: 0 6px 18px rgba(47,174,88,.16);
    }
    .nav-link .icon {
      width: 26px;
      height: 26px;
      margin-right: 16px;
      flex-shrink: 0;
      filter: drop-shadow(0 2px 6px rgba(47,174,88,0.11));
    }
    .nav-link .arrow {
      width: 28px;
      height: 28px;
      margin-left: 14px;
      flex-shrink: 0;
      opacity: 0.78;
      filter: drop-shadow(0 2px 6px rgba(47,174,88,0.11));
      transition: transform .2s;
    }
    .nav-link:hover .arrow {
      transform: translateX(6px) scale(1.12);
    }
    .note {
      color: var(--primary-dark);
      font-size: 1.07rem;
      margin-bottom: 8px;
      margin-top: 10px;
      font-style: italic;
      letter-spacing: 0.5px;
      background: var(--primary-light);
      border-radius: 12px;
      padding: 8px 0;
      box-shadow: 0 2px 8px rgba(47,174,88,.07);
      width: 92%;
      margin-left: auto;
      margin-right: auto;
    }
    footer {
      width: 100vw;
      background: linear-gradient(90deg,#e7f9ed 0%, #d2f3d4 100%);
      color: #2e4e2a;
      text-align: center;
      font-size: 1rem;
      padding: 22px 0 16px 0;
      letter-spacing: 0.5px;
      margin-top: 48px;
      box-shadow: 0 -2px 12px rgba(47,174,88,.08);
      border-top: 2px solid var(--accent);
      z-index: 1;
      position: relative;
    }
    .contact-link {
      color: var(--primary);
      text-decoration: underline;
      font-weight: 600;
      transition: color .2s;
    }
    .contact-link:hover { color: #43b34d; }

    /* ---- ç”»æ¿åŒºåŸŸæ ·å¼ ---- */
    #board-toolbar {
      margin: 30px auto 10px auto;
      display: flex;
      gap: 18px;
      justify-content: center;
    }
    #board-toolbar button {
      padding: 10px 22px;
      font-size: 1.1rem;
      border-radius: 22px;
      border: none;
      background: linear-gradient(90deg,#2fae58 0%,#86e993 100%);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: background .15s, transform .15s;
      box-shadow: 0 2px 8px rgba(47,174,88,.08);
    }
    #board-toolbar button:hover {background: linear-gradient(90deg,#206e3a 0%,#6fd870 100%);}
    #whiteboard {
      display: block;
      margin: 0 auto 18px auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 16px rgba(47,174,88,.09);
      border: 2px solid var(--primary-light);
      touch-action: none;
      width: 95vw;
      max-width: 900px;
      height: 400px;
    }
    @media (max-width: 600px) {
      #whiteboard {height: 240px;}
      #board-toolbar button {font-size: 0.98rem;}
    }
  </style>
  <!-- å¯é€‰ï¼šç½‘ç«™åˆ†æè„šæœ¬ -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "t03r2fy0ch");
  </script>
</head>
<body>
  <header>
    <img src="./banner.jpg" alt="å±±ä¸œå†œä¸šå¤§å­¦ä¿¯ç°å›¾" class="banner-img">
    <div class="banner-title">æ¬¢è¿æ¥åˆ°å±±ä¸œå†œä¸šå¤§å­¦ï¼</div>
  </header>
  <main class="container">
    <div class="nav-links">
      <a href="https://www.sdau.edu.cn/" target="_blank" class="nav-link" id="site">
        <img src="university.svg" alt="å­¦æ ¡å®˜ç½‘" class="icon">
        å­¦æ ¡å®˜ç½‘
        <img src="arrow.svg" alt="å‰å¾€å®˜ç½‘" class="arrow">
      </a>
      <a href="http://xjw.sdau.edu.cn/jwglxt/xtgl/login_slogin.html" target="_blank" class="nav-link" id="jwxt">
        <img src="score.svg" alt="æ•™åŠ¡ç³»ç»Ÿ" class="icon">
        æ•™åŠ¡ç³»ç»Ÿ
        <img src="arrow.svg" alt="å‰å¾€æ•™åŠ¡ç³»ç»Ÿ" class="arrow">
      </a>
      <a href="https://mp.weixin.qq.com/s/pIovgr8lAuy8ZbdxQz1mgw" target="_blank" class="nav-link" id="mp">
        <img src="wechat.svg" alt="å­¦æ ¡å…¬ä¼—å·" class="icon">
        å­¦æ ¡å…¬ä¼—å·
        <img src="arrow.svg" alt="å‰å¾€å…¬ä¼—å·" class="arrow">
      </a>
      <a href="https://my.sdau.edu.cn/new/index.html" target="_blank" class="nav-link" id="campus">
        <img src="plant.svg" alt="æ™ºæ…§æ ¡å›­" class="icon">
        æ™ºæ…§æ ¡å›­
        <img src="arrow.svg" alt="å‰å¾€æ™ºæ…§æ ¡å›­" class="arrow">
      </a>
    </div>
    <p class="note">é€‰æ‹©ä»¥ä¸Šå…¥å£ï¼Œå¼€å¯ä½ çš„ç¥äººæ ¡å›­ä¹‹æ—…</p>
  </main>
  <!-- ----------- åœ¨çº¿ååŒç”»æ¿ ----------- -->
  <div id="board-toolbar">
    <button id="tool-pen">âœï¸ ç¬”</button>
    <button id="tool-eraser">ğŸ§½ æ©¡çš®</button>
    <button id="tool-clear">ğŸ—‘ï¸ æ¸…ç©º</button>
  </div>
  <canvas id="whiteboard" width="900" height="400"></canvas>
  <footer>
    Copyright 2025 Arabidopsis &nbsp;&nbsp;|&nbsp;&nbsp;è¯·è”ç³»ï¼š
    <a class="contact-link" href="mailto:arab@methodbox.top">arab@methodbox.top</a>
  </footer>
  <script>
    // ä½ çš„åŸæœ¬çš„æŒ‰é’®äº¤äº’
    document.querySelectorAll('.nav-link').forEach(el => {
      el.addEventListener('mousedown', function() {
        el.style.background = 'linear-gradient(90deg, #c3f5d3 0%, #e8fff0 100%)';
      });
      el.addEventListener('mouseup', function() {
        setTimeout(() => { el.style.background = ''; }, 180);
      });
      el.addEventListener('mouseleave', function() {
        el.style.background = '';
      });
    });

    // ----------- ç”»æ¿JS -----------
    let tool = 'pen';
    document.getElementById('tool-pen').onclick = () => tool = 'pen';
    document.getElementById('tool-eraser').onclick = () => tool = 'eraser';
    document.getElementById('tool-clear').onclick = clearBoard;

    const canvas = document.getElementById('whiteboard');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let lastPoint = null;
    let strokes = [];
    let currentStroke = null;

    // è¯·æ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨å…¬ç½‘IPæˆ–åŸŸå
    const ws = new WebSocket('ws://ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP:8080');

    function drawStroke(s) {
      ctx.strokeStyle = s.color;
      ctx.lineWidth = s.width;
      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';
      const pts = s.points;
      if (!pts || pts.length < 2) return;
      ctx.beginPath();
      ctx.moveTo(pts[0].x, pts[0].y);
      for (let i = 1; i < pts.length; i++) {
        ctx.lineTo(pts[i].x, pts[i].y);
      }
      ctx.stroke();
    }

    function redraw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      strokes.forEach(drawStroke);
    }

    // é¼ æ ‡/è§¦æ‘¸äº‹ä»¶å…¼å®¹
    function getXY(e) {
      if (e.touches) {
        const rect = canvas.getBoundingClientRect();
        return {
          x: e.touches[0].clientX - rect.left,
          y: e.touches[0].clientY - rect.top
        };
      } else {
        return { x: e.offsetX, y: e.offsetY };
      }
    }

    // å¼€å§‹ç”»ä¸€ç¬”
    function startDraw(e) {
      drawing = true;
      lastPoint = getXY(e);
      currentStroke = {
        tool,
        color: tool === 'pen' ? '#206e3a' : '#fff',
        width: tool === 'pen' ? 3 : 16,
        points: [lastPoint]
      };
    }
    function drawMove(e) {
      if (!drawing) return;
      const pt = getXY(e);
      currentStroke.points.push(pt);
      drawStroke(currentStroke); // æœ¬åœ°é¢„è§ˆ
      lastPoint = pt;
    }
    function endDraw(e) {
      if (!drawing) return;
      drawing = false;
      ws.send(JSON.stringify({ type: 'draw', stroke: currentStroke }));
      currentStroke = null;
    }

    // é¼ æ ‡äº‹ä»¶
    canvas.onmousedown = startDraw;
    canvas.onmousemove = drawMove;
    canvas.onmouseup = endDraw;
    canvas.onmouseleave = () => drawing = false;
    // è§¦æ‘¸äº‹ä»¶
    canvas.addEventListener('touchstart', startDraw);
    canvas.addEventListener('touchmove', function(e) { drawMove(e); e.preventDefault(); });
    canvas.addEventListener('touchend', endDraw);

    ws.onmessage = (msg) => {
      const data = JSON.parse(msg.data);
      if (data.type === 'init') {
        strokes = data.strokes || [];
        redraw();
      } else if (data.type === 'draw') {
        strokes.push(data.stroke);
        drawStroke(data.stroke);
      } else if (data.type === 'clear') {
        strokes = [];
        redraw();
      }
    };

    function clearBoard() {
      ws.send(JSON.stringify({ type: 'clear' }));
    }
  </script>
</body>
</html>
